{"ast":null,"code":"var _jsxFileName = \"/Users/mariasitkovets/Desktop/stalkmyprof/StalkMyProf/src/Chat.js\";\nimport React from \"react\";\nimport votes from \"./votes.json\";\n\nclass Chat extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isDisabled: false,\n      answer: [],\n      upvotes: []\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.getRequest = this.getRequest.bind(this);\n  }\n\n  async handleSubmit(e) {\n    e.preventDefault();\n    const isDisabled = this.state.isDisabled;\n    this.setState({\n      isDisabled: true\n    });\n\n    if (!isDisabled) {\n      const data = new FormData(e.target);\n      const query = data.get(\"query\");\n      await this.getRequest(query);\n    }\n  }\n\n  async getRequest(query) {\n    var request = require(\"request\");\n\n    var options = {\n      method: \"POST\",\n      url: \"https://api.genesysappliedresearch.com/v2/knowledge/knowledgebases/4b383246-2f38-4205-944e-fc2adc99f182/search\",\n      headers: {\n        Connection: \"keep-alive\",\n        \"Content-Length\": \"476\",\n        \"Accept-Encoding\": \"gzip, deflate\",\n        Host: \"api.genesysappliedresearch.com\",\n        Accept: \"*/*\",\n        \"User-Agent\": \"PostmanRuntime/7.18.0\",\n        token: \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJvcmdJZCI6IjliZDEyMjY4LTJkMGMtNDU4My05NjIzLWQ0YWUzMjQ3MzcwZiIsImV4cCI6MTU3MTU4NTA1MywiaWF0IjoxNTcxNTgxNDUzfQ.i-O0RBvmnD0xK2CJ_6KzxqpJbqRF9RqOI_R4XIJD7pY\",\n        organizationid: \"9bd12268-2d0c-4583-9623-d4ae3247370f\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: {\n        query: query,\n        pageSize: 3,\n        pageNumber: 1,\n        sortOrder: \"string\",\n        sortBy: \"string\",\n        languageCode: \"en-US\",\n        documentType: \"Faq\"\n      },\n      json: true\n    };\n    let i = this;\n    request(options, function (error, response, body) {\n      if (error) console.log(error);\n      let answer = [];\n\n      for (let res of body.results) {\n        answer.push(res.faq.answer);\n      }\n\n      if (answer.length === 0) answer.push(\"No answers for this question. Please try another question.\");\n      let upvotes = [];\n\n      try {\n        const answer_votes = JSON.parse(votes);\n\n        for (let j = 0; j < answer.length; j++) {\n          if (answer[j] in answer_votes) {\n            upvotes[j] = answer_votes[answer[j]];\n          } else {\n            upvotes[j] = 0;\n          }\n        }\n      } catch {\n        for (let j = 0; j < answer.length; j++) {\n          upvotes[j] = 0;\n        }\n      }\n\n      i.setState({\n        answer,\n        upvotes,\n        isDisabled: false\n      });\n    });\n  }\n\n  vote(voteType, answer) {\n    console.log(\"kk\"); // voteType === \"upvote\" ? this.upvotes++ : this.upvotes--;\n  }\n\n  formatMultipleAnswers(answer) {\n    let res = [];\n\n    for (let a of answer) {\n      res.push(React.createElement(\"div\", {\n        className: \"ui visible message huge\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, a), React.createElement(\"i\", {\n        className: \"small angle up icon\",\n        onClick: () => this.vote(\"upvote\", a),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }), React.createElement(\"i\", {\n        className: \"small angle down icon\",\n        onClick: () => this.vote(\"downvote\", a),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      })));\n    }\n\n    return res;\n  }\n\n  render() {\n    const answer = this.state.answer;\n    let res;\n\n    if (answer.length === 0) {\n      res = React.createElement(\"div\", {\n        className: \"container-chat\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container-inner-chat\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ui huge icon input\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        name: \"query\",\n        type: \"text\",\n        placeholder: \"Ask about a prof ...\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }), React.createElement(\"i\", {\n        className: \"search icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      })))));\n    } else {\n      const answerJSX = this.formatMultipleAnswers(answer);\n      res = React.createElement(\"div\", {\n        className: \"container-chat\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container-inner-chat\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ui huge icon input\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        name: \"query\",\n        type: \"text\",\n        placeholder: \"Ask about a prof ...\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }), React.createElement(\"i\", {\n        className: \"search icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }))), answerJSX));\n    }\n\n    return res;\n  }\n\n}\n\nexport default Chat;","map":{"version":3,"sources":["/Users/mariasitkovets/Desktop/stalkmyprof/StalkMyProf/src/Chat.js"],"names":["React","votes","Chat","Component","constructor","props","state","isDisabled","answer","upvotes","handleSubmit","bind","getRequest","e","preventDefault","setState","data","FormData","target","query","get","request","require","options","method","url","headers","Connection","Host","Accept","token","organizationid","body","pageSize","pageNumber","sortOrder","sortBy","languageCode","documentType","json","i","error","response","console","log","res","results","push","faq","length","answer_votes","JSON","parse","j","vote","voteType","formatMultipleAnswers","a","render","answerJSX"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport votes from \"./votes.json\";\n\nclass Chat extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { isDisabled: false, answer: [], upvotes: [] };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.getRequest = this.getRequest.bind(this);\n  }\n\n  async handleSubmit(e) {\n    e.preventDefault();\n    const { isDisabled } = this.state;\n    this.setState({ isDisabled: true });\n    if (!isDisabled) {\n      const data = new FormData(e.target);\n      const query = data.get(\"query\");\n      await this.getRequest(query);\n    }\n  }\n\n  async getRequest(query) {\n    var request = require(\"request\");\n\n    var options = {\n      method: \"POST\",\n      url:\n        \"https://api.genesysappliedresearch.com/v2/knowledge/knowledgebases/4b383246-2f38-4205-944e-fc2adc99f182/search\",\n      headers: {\n        Connection: \"keep-alive\",\n        \"Content-Length\": \"476\",\n        \"Accept-Encoding\": \"gzip, deflate\",\n        Host: \"api.genesysappliedresearch.com\",\n        Accept: \"*/*\",\n        \"User-Agent\": \"PostmanRuntime/7.18.0\",\n        token:\n          \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJvcmdJZCI6IjliZDEyMjY4LTJkMGMtNDU4My05NjIzLWQ0YWUzMjQ3MzcwZiIsImV4cCI6MTU3MTU4NTA1MywiaWF0IjoxNTcxNTgxNDUzfQ.i-O0RBvmnD0xK2CJ_6KzxqpJbqRF9RqOI_R4XIJD7pY\",\n        organizationid: \"9bd12268-2d0c-4583-9623-d4ae3247370f\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: {\n        query: query,\n        pageSize: 3,\n        pageNumber: 1,\n        sortOrder: \"string\",\n        sortBy: \"string\",\n        languageCode: \"en-US\",\n        documentType: \"Faq\"\n      },\n      json: true\n    };\n    let i = this;\n    request(options, function(error, response, body) {\n      if (error) console.log(error);\n      let answer = [];\n      for (let res of body.results) {\n        answer.push(res.faq.answer);\n      }\n      if (answer.length === 0)\n        answer.push(\n          \"No answers for this question. Please try another question.\"\n        );\n      let upvotes = [];\n      try {\n        const answer_votes = JSON.parse(votes);\n        for (let j = 0; j < answer.length; j++) {\n          if (answer[j] in answer_votes) {\n            upvotes[j] = answer_votes[answer[j]];\n          } else {\n            upvotes[j] = 0;\n          }\n        }\n      } catch {\n        for (let j = 0; j < answer.length; j++) {\n          upvotes[j] = 0;\n        }\n      }\n      i.setState({ answer, upvotes, isDisabled: false });\n    });\n  }\n\n  vote(voteType, answer) {\n    console.log(\"kk\");\n    // voteType === \"upvote\" ? this.upvotes++ : this.upvotes--;\n  }\n\n  formatMultipleAnswers(answer) {\n    let res = [];\n    for (let a of answer) {\n      res.push(\n        <div className=\"ui visible message huge\">\n          <p>{a}</p>\n          <i\n            className=\"small angle up icon\"\n            onClick={() => this.vote(\"upvote\", a)}\n          ></i>\n          <i\n            className=\"small angle down icon\"\n            onClick={() => this.vote(\"downvote\", a)}\n          ></i>\n        </div>\n      );\n    }\n    return res;\n  }\n\n  render() {\n    const { answer } = this.state;\n    let res;\n    if (answer.length === 0) {\n      res = (\n        <div className=\"container-chat\">\n          <div className=\"container-inner-chat\">\n            <form onSubmit={this.handleSubmit}>\n              <div className=\"ui huge icon input\">\n                <input\n                  name=\"query\"\n                  type=\"text\"\n                  placeholder=\"Ask about a prof ...\"\n                />\n                <i className=\"search icon\"></i>\n              </div>\n            </form>\n          </div>\n        </div>\n      );\n    } else {\n      const answerJSX = this.formatMultipleAnswers(answer);\n      res = (\n        <div className=\"container-chat\">\n          <div className=\"container-inner-chat\">\n            <form onSubmit={this.handleSubmit}>\n              <div className=\"ui huge icon input\">\n                <input\n                  name=\"query\"\n                  type=\"text\"\n                  placeholder=\"Ask about a prof ...\"\n                />\n                <i className=\"search icon\"></i>\n              </div>\n            </form>\n            {answerJSX}\n          </div>\n        </div>\n      );\n    }\n    return res;\n  }\n}\n\nexport default Chat;\n"]},"metadata":{},"sourceType":"module"}